<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Awaken v23 - 17SET25</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(to right, #1e1e1e, #2e2e2e);
      color: #fff;
      margin: 0;
      padding: 0;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #111;
      padding: 10px 20px;
    }
    header img {
      height: 40px;
    }
    header button {
      background: #444;
      color: #fff;
      border: none;
      padding: 6px 12px;
      border-radius: 5px;
      cursor: pointer;
    }
    h2 {
      margin-top: 20px;
      color: #ffd700;
    }
    .results {
      margin: 20px;
    }
    details {
      background: #222;
      border-radius: 8px;
      margin-bottom: 10px;
      padding: 10px;
    }
    summary {
      cursor: pointer;
      font-weight: bold;
    }
    .count-box {
      float: right;
      font-size: 0.9em;
      background: #333;
      padding: 4px 8px;
      border-radius: 5px;
      margin-left: 10px;
    }
    .player-card {
      background: #333;
      padding: 8px;
      border-radius: 5px;
      margin: 5px 0;
    }
    footer {
      background: #111;
      text-align: center;
      padding: 10px;
      margin-top: 20px;
      font-size: 0.9em;
    }
    .export-btn {
      background: #25D366;
      color: white;
      border: none;
      padding: 8px 12px;
      margin: 10px 0;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>
    <img src="https://i.ibb.co/9mWwdssF/chatgpt-jogadoresquestionaveis.png" alt="Logo Fantasy">
    <button id="darkModeToggle">ðŸŒ™ Dark Mode</button>
  </header>

  <!-- Consulta 1 -->
  <div class="results" id="resultsLeague">
    <h2>Consulta 1: Por Liga</h2>
    <div id="leagueResults"></div>
  </div>

  <!-- Consulta 2 -->
  <div class="results" id="resultsUser">
    <h2>Consulta 2: Por UsuÃ¡rio</h2>
    <div id="userResults"></div>
  </div>

  <!-- Consulta 3 -->
  <div class="results" id="resultsFranchise">
    <h2>Consulta 3: Franchise Players</h2>
    <div id="franchiseResults"></div>
    <button class="export-btn" onclick="exportToWhatsApp()">ðŸ“¤ Exportar para WhatsApp</button>
  </div>

  <footer>
    <span id="accessCount"></span> â€¢ 
    <a href="mailto:scrum.moura@gmail.com" style="color:#ffd700;">Algo errado? Novas ideias? Manda para cÃ¡.</a>
  </footer>

<script>
  // Lista de franquias oficiais da NFL
  const nflTeams = [
    "Arizona Cardinals","Atlanta Falcons","Baltimore Ravens","Buffalo Bills",
    "Carolina Panthers","Chicago Bears","Cincinnati Bengals","Cleveland Browns",
    "Dallas Cowboys","Denver Broncos","Detroit Lions","Green Bay Packers",
    "Houston Texans","Indianapolis Colts","Jacksonville Jaguars","Kansas City Chiefs",
    "Las Vegas Raiders","Los Angeles Chargers","Los Angeles Rams","Miami Dolphins",
    "Minnesota Vikings","New England Patriots","New Orleans Saints","New York Giants",
    "New York Jets","Philadelphia Eagles","Pittsburgh Steelers","San Francisco 49ers",
    "Seattle Seahawks","Tampa Bay Buccaneers","Tennessee Titans","Washington Commanders"
  ];

  // Dark mode
  document.getElementById("darkModeToggle").onclick = () => {
    document.body.classList.toggle("light");
  };

  // Contador de acessos
  let count = localStorage.getItem("accessCount") || 0;
  count++;
  localStorage.setItem("accessCount", count);
  document.getElementById("accessCount").innerText = `Acessos: ${count}`;

  // SimulaÃ§Ã£o de dados
  const leagueData = [
    { team: "Buffalo Bills", players: [
      { name: "Josh Allen", status: "Healthy", starter: true },
      { name: "Stefon Diggs", status: "Questionable", starter: true }
    ]},
    { team: "Miami Dolphins", players: [
      { name: "Tyreek Hill", status: "Out", starter: true },
      { name: "Tua Tagovailoa", status: "Healthy", starter: true }
    ]}
  ];

  const userData = [
    { league: "Liga XPTO", leagueId: "1210411931316277248", team: "Kansas City Chiefs", players: [
      { name: "Patrick Mahomes", status: "Healthy", starter: true },
      { name: "Travis Kelce", status: "Questionable", starter: true }
    ]},
    { league: "Liga Teste", leagueId: "1210411931316279999", team: "New York Jets", players: [
      { name: "Aaron Rodgers", status: "Out", starter: true },
      { name: "Garrett Wilson", status: "Healthy", starter: true }
    ]}
  ];

  const franchiseData = [
    { team: "Green Bay Packers", players: [
      { name: "Aaron Jones", status: "Questionable", isFranchise: true, starter: true },
      { name: "Jordan Love", status: "Healthy", isFranchise: false, starter: true }
    ]},
    { team: "San Francisco 49ers", players: [
      { name: "Deebo Samuel", status: "Out", isFranchise: true, starter: true },
      { name: "Brock Purdy", status: "Healthy", isFranchise: true, starter: true }
    ]}
  ];

  // Render consulta 1
  function renderLeagueResults() {
    const container = document.getElementById("leagueResults");
    container.innerHTML = "";
    leagueData.sort((a,b) => a.team.localeCompare(b.team));
    leagueData.forEach(teamData => {
      const injuredCount = teamData.players.filter(p => p.status !== "Healthy" && p.starter).length;
      const details = document.createElement("details");
      details.innerHTML = `<summary>${teamData.team}<span class="count-box">Lesionados: ${injuredCount}</span></summary>`;
      const list = document.createElement("div");
      teamData.players.forEach(p => {
        if (p.starter && p.status !== "Healthy") {
          const card = document.createElement("div");
          card.className = "player-card";
          card.innerText = `${p.name} - ${p.status}`;
          list.appendChild(card);
        }
      });
      details.appendChild(list);
      container.appendChild(details);
    });
  }

  // Render consulta 2
  function renderUserResults() {
    const container = document.getElementById("userResults");
    container.innerHTML = "";
    userData.sort((a,b) => a.team.localeCompare(b.team));
    userData.forEach(entry => {
      const injuredCount = entry.players.filter(p => p.status !== "Healthy" && p.starter).length;
      const details = document.createElement("details");
      details.innerHTML = `<summary>${entry.team} (Liga ID: ${entry.leagueId})<span class="count-box">Lesionados: ${injuredCount}</span></summary>`;
      const list = document.createElement("div");
      entry.players.forEach(p => {
        if (p.starter && p.status !== "Healthy") {
          const card = document.createElement("div");
          card.className = "player-card";
          card.innerText = `${p.name} - ${p.status}`;
          list.appendChild(card);
        }
      });
      details.appendChild(list);
      container.appendChild(details);
    });
  }

  // Render consulta 3
  function renderFranchiseResults() {
    const container = document.getElementById("franchiseResults");
    container.innerHTML = "";
    franchiseData.sort((a,b) => a.team.localeCompare(b.team));
    franchiseData.forEach(teamData => {
      const injuredCount = teamData.players.filter(p => p.status !== "Healthy" && p.starter).length;
      const franchiseCount = teamData.players.filter(p => p.isFranchise).length;
      const details = document.createElement("details");
      details.innerHTML = `<summary>${teamData.team}<span class="count-box">Lesionados: ${injuredCount}</span><span class="count-box">Franchise: ${franchiseCount}</span></summary>`;
      const list = document.createElement("div");
      teamData.players.forEach(p => {
        if (p.starter && (p.status !== "Healthy" || p.isFranchise)) {
          const card = document.createElement("div");
          card.className = "player-card";
          card.innerText = `${p.name} - ${p.status} ${p.isFranchise ? "(Franchise)" : ""}`;
          list.appendChild(card);
        }
      });
      details.appendChild(list);
      container.appendChild(details);
    });
  }

  function exportToWhatsApp() {
    let message = "Resumo de times com problemas:\n\n";
    franchiseData.forEach(teamData => {
      const injuredCount = teamData.players.filter(p => p.status !== "Healthy" && p.starter).length;
      const franchiseCount = teamData.players.filter(p => p.isFranchise).length;
      if (injuredCount > 0 || franchiseCount > 0) {
        message += `${teamData.team}: Lesionados ${injuredCount}, Franchise ${franchiseCount}\n`;
      }
    });
    const url = `https://wa.me/?text=${encodeURIComponent(message)}`;
    window.open(url, "_blank");
  }

  renderLeagueResults();
  renderUserResults();
  renderFranchiseResults();
</script>
</body>
</html>
